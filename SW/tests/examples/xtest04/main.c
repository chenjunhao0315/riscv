#include <stdio.h>

#include "../include/uart.h"
#include "../include/utils.h"
#include "../include/xprintf.h"

int main(void) {
    uart_init();

	int m, n;			// the pair of integers to decide length
	int i, j;			// help to determine whether m and n are coprime
	int remain;			// the remainder of m/n
	int a, b, c;		// the primitive Pythagorean Triple 
	int k;				// the multiple to multiply
	int aa, bb, cc;		// the multiples of primitive Pythagorean Triple
	int num = 0;		// the number of Pythagorean Triple
	int h;				// store number temporarily

	for (m = 2; m < 23; m++) {				// to test possible number of m
		for (n = m - 1; n > 0; n -=2) {		// to test possible number of n
			i = m;					// to prevent from changing the number of m
			j = n;					// to prevent from changing the number of n
			while (j != 0) {		// to decide whether m and n are coprime
				if (j == 1) {		// if n=1, calculate directly
					a = m * m - n * n;		// to find primitive length of a
					b = 2 * m * n;			// to find primitive length of b
					c = m * m + n * n;		// to find primitive length of c
					cc = 0;					// reset the number of cc
					for (k = 1; cc < 501; k++) {	// possible number of k 
						aa = a * k;			/* calculate all multiple of 
													primitive length of a */ 
						bb = b * k;			/* calculate all multiple of
													primitive length of b */
						cc = c * k;			/* calculate all multiple of
													primitive length of c */
						if (aa > bb) {
							h = aa;
							aa = bb;
							bb = h;			// insure the length is a<b<c
						}
						if (cc < 501) {	// comfirm lengths small than 20000
							xprintf("Pythagorean Triple #%d is (%d,%d,%d)\n",
									++num, aa, bb, cc);	// print out the result
						}
					}
				}
			remain = i % j;		
			i = j;
			j = remain;					/* decide whether m and n are coprime
												by using Euclidean algorithm */
			}

			if (j == 1) {				// if j=1, m and n are coprime
				a = m * m - n * n;		// to find primitive length of a
				b = 2 * m * n;			// to find primitive length of b
				c = m * m + n * n;		// to find primitive length of c
				cc = 0;					// reset the number of cc
				for (k = 1; cc < 501; k++) {	// possible number of k 
					aa = a * k;					/* calculate all multiple of 
													primitive length of a */ 
					bb = b * k;					/* calculate all multiple of 
													primitive length of a */ 
					cc = c * k;					/* calculate all multiple of 
													primitive length of a */
					if (aa > bb) {
						h = aa;
						aa = bb;
						bb = h;				// insure the length is a<b<c
					}
					if (cc < 501) {			// comfirm lengths small than 20000
						xprintf("Pythagorean Triple #%d is (%d,%d,%d)\n", 
								++num, aa, bb, cc);		// print out the result
					}
				}				
			}
		}
	}
	xprintf("Total number of Pythagorean triples found is %d\n", num);	
														// print the total number

    set_test_pass();

	return 0;
}

// Pythagorean Triple #1 is (3,4,5)
// Pythagorean Triple #2 is (6,8,10)
// Pythagorean Triple #3 is (9,12,15)
// Pythagorean Triple #4 is (12,16,20)
// Pythagorean Triple #5 is (15,20,25)
// Pythagorean Triple #6 is (18,24,30)
// Pythagorean Triple #7 is (21,28,35)
// Pythagorean Triple #8 is (24,32,40)
// Pythagorean Triple #9 is (27,36,45)
// Pythagorean Triple #10 is (30,40,50)
// Pythagorean Triple #11 is (33,44,55)
// Pythagorean Triple #12 is (36,48,60)
// Pythagorean Triple #13 is (39,52,65)
// Pythagorean Triple #14 is (42,56,70)
// Pythagorean Triple #15 is (45,60,75)
// Pythagorean Triple #16 is (48,64,80)
// Pythagorean Triple #17 is (51,68,85)
// Pythagorean Triple #18 is (54,72,90)
// Pythagorean Triple #19 is (57,76,95)
// Pythagorean Triple #20 is (60,80,100)
// Pythagorean Triple #21 is (63,84,105)
// Pythagorean Triple #22 is (66,88,110)
// Pythagorean Triple #23 is (69,92,115)
// Pythagorean Triple #24 is (72,96,120)
// Pythagorean Triple #25 is (75,100,125)
// Pythagorean Triple #26 is (78,104,130)
// Pythagorean Triple #27 is (81,108,135)
// Pythagorean Triple #28 is (84,112,140)
// Pythagorean Triple #29 is (87,116,145)
// Pythagorean Triple #30 is (90,120,150)
// Pythagorean Triple #31 is (93,124,155)
// Pythagorean Triple #32 is (96,128,160)
// Pythagorean Triple #33 is (99,132,165)
// Pythagorean Triple #34 is (102,136,170)
// Pythagorean Triple #35 is (105,140,175)
// Pythagorean Triple #36 is (108,144,180)
// Pythagorean Triple #37 is (111,148,185)
// Pythagorean Triple #38 is (114,152,190)
// Pythagorean Triple #39 is (117,156,195)
// Pythagorean Triple #40 is (120,160,200)
// Pythagorean Triple #41 is (123,164,205)
// Pythagorean Triple #42 is (126,168,210)
// Pythagorean Triple #43 is (129,172,215)
// Pythagorean Triple #44 is (132,176,220)
// Pythagorean Triple #45 is (135,180,225)
// Pythagorean Triple #46 is (138,184,230)
// Pythagorean Triple #47 is (141,188,235)
// Pythagorean Triple #48 is (144,192,240)
// Pythagorean Triple #49 is (147,196,245)
// Pythagorean Triple #50 is (150,200,250)
// Pythagorean Triple #51 is (153,204,255)
// Pythagorean Triple #52 is (156,208,260)
// Pythagorean Triple #53 is (159,212,265)
// Pythagorean Triple #54 is (162,216,270)
// Pythagorean Triple #55 is (165,220,275)
// Pythagorean Triple #56 is (168,224,280)
// Pythagorean Triple #57 is (171,228,285)
// Pythagorean Triple #58 is (174,232,290)
// Pythagorean Triple #59 is (177,236,295)
// Pythagorean Triple #60 is (180,240,300)
// Pythagorean Triple #61 is (183,244,305)
// Pythagorean Triple #62 is (186,248,310)
// Pythagorean Triple #63 is (189,252,315)
// Pythagorean Triple #64 is (192,256,320)
// Pythagorean Triple #65 is (195,260,325)
// Pythagorean Triple #66 is (198,264,330)
// Pythagorean Triple #67 is (201,268,335)
// Pythagorean Triple #68 is (204,272,340)
// Pythagorean Triple #69 is (207,276,345)
// Pythagorean Triple #70 is (210,280,350)
// Pythagorean Triple #71 is (213,284,355)
// Pythagorean Triple #72 is (216,288,360)
// Pythagorean Triple #73 is (219,292,365)
// Pythagorean Triple #74 is (222,296,370)
// Pythagorean Triple #75 is (225,300,375)
// Pythagorean Triple #76 is (228,304,380)
// Pythagorean Triple #77 is (231,308,385)
// Pythagorean Triple #78 is (234,312,390)
// Pythagorean Triple #79 is (237,316,395)
// Pythagorean Triple #80 is (240,320,400)
// Pythagorean Triple #81 is (243,324,405)
// Pythagorean Triple #82 is (246,328,410)
// Pythagorean Triple #83 is (249,332,415)
// Pythagorean Triple #84 is (252,336,420)
// Pythagorean Triple #85 is (255,340,425)
// Pythagorean Triple #86 is (258,344,430)
// Pythagorean Triple #87 is (261,348,435)
// Pythagorean Triple #88 is (264,352,440)
// Pythagorean Triple #89 is (267,356,445)
// Pythagorean Triple #90 is (270,360,450)
// Pythagorean Triple #91 is (273,364,455)
// Pythagorean Triple #92 is (276,368,460)
// Pythagorean Triple #93 is (279,372,465)
// Pythagorean Triple #94 is (282,376,470)
// Pythagorean Triple #95 is (285,380,475)
// Pythagorean Triple #96 is (288,384,480)
// Pythagorean Triple #97 is (291,388,485)
// Pythagorean Triple #98 is (294,392,490)
// Pythagorean Triple #99 is (297,396,495)
// Pythagorean Triple #100 is (300,400,500)
// Pythagorean Triple #101 is (5,12,13)
// Pythagorean Triple #102 is (10,24,26)
// Pythagorean Triple #103 is (15,36,39)
// Pythagorean Triple #104 is (20,48,52)
// Pythagorean Triple #105 is (25,60,65)
// Pythagorean Triple #106 is (30,72,78)
// Pythagorean Triple #107 is (35,84,91)
// Pythagorean Triple #108 is (40,96,104)
// Pythagorean Triple #109 is (45,108,117)
// Pythagorean Triple #110 is (50,120,130)
// Pythagorean Triple #111 is (55,132,143)
// Pythagorean Triple #112 is (60,144,156)
// Pythagorean Triple #113 is (65,156,169)
// Pythagorean Triple #114 is (70,168,182)
// Pythagorean Triple #115 is (75,180,195)
// Pythagorean Triple #116 is (80,192,208)
// Pythagorean Triple #117 is (85,204,221)
// Pythagorean Triple #118 is (90,216,234)
// Pythagorean Triple #119 is (95,228,247)
// Pythagorean Triple #120 is (100,240,260)
// Pythagorean Triple #121 is (105,252,273)
// Pythagorean Triple #122 is (110,264,286)
// Pythagorean Triple #123 is (115,276,299)
// Pythagorean Triple #124 is (120,288,312)
// Pythagorean Triple #125 is (125,300,325)
// Pythagorean Triple #126 is (130,312,338)
// Pythagorean Triple #127 is (135,324,351)
// Pythagorean Triple #128 is (140,336,364)
// Pythagorean Triple #129 is (145,348,377)
// Pythagorean Triple #130 is (150,360,390)
// Pythagorean Triple #131 is (155,372,403)
// Pythagorean Triple #132 is (160,384,416)
// Pythagorean Triple #133 is (165,396,429)
// Pythagorean Triple #134 is (170,408,442)
// Pythagorean Triple #135 is (175,420,455)
// Pythagorean Triple #136 is (180,432,468)
// Pythagorean Triple #137 is (185,444,481)
// Pythagorean Triple #138 is (190,456,494)
// Pythagorean Triple #139 is (7,24,25)
// Pythagorean Triple #140 is (14,48,50)
// Pythagorean Triple #141 is (21,72,75)
// Pythagorean Triple #142 is (28,96,100)
// Pythagorean Triple #143 is (35,120,125)
// Pythagorean Triple #144 is (42,144,150)
// Pythagorean Triple #145 is (49,168,175)
// Pythagorean Triple #146 is (56,192,200)
// Pythagorean Triple #147 is (63,216,225)
// Pythagorean Triple #148 is (70,240,250)
// Pythagorean Triple #149 is (77,264,275)
// Pythagorean Triple #150 is (84,288,300)
// Pythagorean Triple #151 is (91,312,325)
// Pythagorean Triple #152 is (98,336,350)
// Pythagorean Triple #153 is (105,360,375)
// Pythagorean Triple #154 is (112,384,400)
// Pythagorean Triple #155 is (119,408,425)
// Pythagorean Triple #156 is (126,432,450)
// Pythagorean Triple #157 is (133,456,475)
// Pythagorean Triple #158 is (140,480,500)
// Pythagorean Triple #159 is (8,15,17)
// Pythagorean Triple #160 is (16,30,34)
// Pythagorean Triple #161 is (24,45,51)
// Pythagorean Triple #162 is (32,60,68)
// Pythagorean Triple #163 is (40,75,85)
// Pythagorean Triple #164 is (48,90,102)
// Pythagorean Triple #165 is (56,105,119)
// Pythagorean Triple #166 is (64,120,136)
// Pythagorean Triple #167 is (72,135,153)
// Pythagorean Triple #168 is (80,150,170)
// Pythagorean Triple #169 is (88,165,187)
// Pythagorean Triple #170 is (96,180,204)
// Pythagorean Triple #171 is (104,195,221)
// Pythagorean Triple #172 is (112,210,238)
// Pythagorean Triple #173 is (120,225,255)
// Pythagorean Triple #174 is (128,240,272)
// Pythagorean Triple #175 is (136,255,289)
// Pythagorean Triple #176 is (144,270,306)
// Pythagorean Triple #177 is (152,285,323)
// Pythagorean Triple #178 is (160,300,340)
// Pythagorean Triple #179 is (168,315,357)
// Pythagorean Triple #180 is (176,330,374)
// Pythagorean Triple #181 is (184,345,391)
// Pythagorean Triple #182 is (192,360,408)
// Pythagorean Triple #183 is (200,375,425)
// Pythagorean Triple #184 is (208,390,442)
// Pythagorean Triple #185 is (216,405,459)
// Pythagorean Triple #186 is (224,420,476)
// Pythagorean Triple #187 is (232,435,493)
// Pythagorean Triple #188 is (9,40,41)
// Pythagorean Triple #189 is (18,80,82)
// Pythagorean Triple #190 is (27,120,123)
// Pythagorean Triple #191 is (36,160,164)
// Pythagorean Triple #192 is (45,200,205)
// Pythagorean Triple #193 is (54,240,246)
// Pythagorean Triple #194 is (63,280,287)
// Pythagorean Triple #195 is (72,320,328)
// Pythagorean Triple #196 is (81,360,369)
// Pythagorean Triple #197 is (90,400,410)
// Pythagorean Triple #198 is (99,440,451)
// Pythagorean Triple #199 is (108,480,492)
// Pythagorean Triple #200 is (20,21,29)
// Pythagorean Triple #201 is (40,42,58)
// Pythagorean Triple #202 is (60,63,87)
// Pythagorean Triple #203 is (80,84,116)
// Pythagorean Triple #204 is (100,105,145)
// Pythagorean Triple #205 is (120,126,174)
// Pythagorean Triple #206 is (140,147,203)
// Pythagorean Triple #207 is (160,168,232)
// Pythagorean Triple #208 is (180,189,261)
// Pythagorean Triple #209 is (200,210,290)
// Pythagorean Triple #210 is (220,231,319)
// Pythagorean Triple #211 is (240,252,348)
// Pythagorean Triple #212 is (260,273,377)
// Pythagorean Triple #213 is (280,294,406)
// Pythagorean Triple #214 is (300,315,435)
// Pythagorean Triple #215 is (320,336,464)
// Pythagorean Triple #216 is (340,357,493)
// Pythagorean Triple #217 is (11,60,61)
// Pythagorean Triple #218 is (22,120,122)
// Pythagorean Triple #219 is (33,180,183)
// Pythagorean Triple #220 is (44,240,244)
// Pythagorean Triple #221 is (55,300,305)
// Pythagorean Triple #222 is (66,360,366)
// Pythagorean Triple #223 is (77,420,427)
// Pythagorean Triple #224 is (88,480,488)
// Pythagorean Triple #225 is (12,35,37)
// Pythagorean Triple #226 is (24,70,74)
// Pythagorean Triple #227 is (36,105,111)
// Pythagorean Triple #228 is (48,140,148)
// Pythagorean Triple #229 is (60,175,185)
// Pythagorean Triple #230 is (72,210,222)
// Pythagorean Triple #231 is (84,245,259)
// Pythagorean Triple #232 is (96,280,296)
// Pythagorean Triple #233 is (108,315,333)
// Pythagorean Triple #234 is (120,350,370)
// Pythagorean Triple #235 is (132,385,407)
// Pythagorean Triple #236 is (144,420,444)
// Pythagorean Triple #237 is (156,455,481)
// Pythagorean Triple #238 is (13,84,85)
// Pythagorean Triple #239 is (26,168,170)
// Pythagorean Triple #240 is (39,252,255)
// Pythagorean Triple #241 is (52,336,340)
// Pythagorean Triple #242 is (65,420,425)
// Pythagorean Triple #243 is (33,56,65)
// Pythagorean Triple #244 is (66,112,130)
// Pythagorean Triple #245 is (99,168,195)
// Pythagorean Triple #246 is (132,224,260)
// Pythagorean Triple #247 is (165,280,325)
// Pythagorean Triple #248 is (198,336,390)
// Pythagorean Triple #249 is (231,392,455)
// Pythagorean Triple #250 is (28,45,53)
// Pythagorean Triple #251 is (56,90,106)
// Pythagorean Triple #252 is (84,135,159)
// Pythagorean Triple #253 is (112,180,212)
// Pythagorean Triple #254 is (140,225,265)
// Pythagorean Triple #255 is (168,270,318)
// Pythagorean Triple #256 is (196,315,371)
// Pythagorean Triple #257 is (224,360,424)
// Pythagorean Triple #258 is (252,405,477)
// Pythagorean Triple #259 is (15,112,113)
// Pythagorean Triple #260 is (30,224,226)
// Pythagorean Triple #261 is (45,336,339)
// Pythagorean Triple #262 is (60,448,452)
// Pythagorean Triple #263 is (39,80,89)
// Pythagorean Triple #264 is (78,160,178)
// Pythagorean Triple #265 is (117,240,267)
// Pythagorean Triple #266 is (156,320,356)
// Pythagorean Triple #267 is (195,400,445)
// Pythagorean Triple #268 is (48,55,73)
// Pythagorean Triple #269 is (96,110,146)
// Pythagorean Triple #270 is (144,165,219)
// Pythagorean Triple #271 is (192,220,292)
// Pythagorean Triple #272 is (240,275,365)
// Pythagorean Triple #273 is (288,330,438)
// Pythagorean Triple #274 is (16,63,65)
// Pythagorean Triple #275 is (32,126,130)
// Pythagorean Triple #276 is (48,189,195)
// Pythagorean Triple #277 is (64,252,260)
// Pythagorean Triple #278 is (80,315,325)
// Pythagorean Triple #279 is (96,378,390)
// Pythagorean Triple #280 is (112,441,455)
// Pythagorean Triple #281 is (17,144,145)
// Pythagorean Triple #282 is (34,288,290)
// Pythagorean Triple #283 is (51,432,435)
// Pythagorean Triple #284 is (65,72,97)
// Pythagorean Triple #285 is (130,144,194)
// Pythagorean Triple #286 is (195,216,291)
// Pythagorean Triple #287 is (260,288,388)
// Pythagorean Triple #288 is (325,360,485)
// Pythagorean Triple #289 is (36,77,85)
// Pythagorean Triple #290 is (72,154,170)
// Pythagorean Triple #291 is (108,231,255)
// Pythagorean Triple #292 is (144,308,340)
// Pythagorean Triple #293 is (180,385,425)
// Pythagorean Triple #294 is (19,180,181)
// Pythagorean Triple #295 is (38,360,362)
// Pythagorean Triple #296 is (51,140,149)
// Pythagorean Triple #297 is (102,280,298)
// Pythagorean Triple #298 is (153,420,447)
// Pythagorean Triple #299 is (60,91,109)
// Pythagorean Triple #300 is (120,182,218)
// Pythagorean Triple #301 is (180,273,327)
// Pythagorean Triple #302 is (240,364,436)
// Pythagorean Triple #303 is (20,99,101)
// Pythagorean Triple #304 is (40,198,202)
// Pythagorean Triple #305 is (60,297,303)
// Pythagorean Triple #306 is (80,396,404)
// Pythagorean Triple #307 is (21,220,221)
// Pythagorean Triple #308 is (42,440,442)
// Pythagorean Triple #309 is (57,176,185)
// Pythagorean Triple #310 is (114,352,370)
// Pythagorean Triple #311 is (85,132,157)
// Pythagorean Triple #312 is (170,264,314)
// Pythagorean Triple #313 is (255,396,471)
// Pythagorean Triple #314 is (88,105,137)
// Pythagorean Triple #315 is (176,210,274)
// Pythagorean Triple #316 is (264,315,411)
// Pythagorean Triple #317 is (44,117,125)
// Pythagorean Triple #318 is (88,234,250)
// Pythagorean Triple #319 is (132,351,375)
// Pythagorean Triple #320 is (176,468,500)
// Pythagorean Triple #321 is (23,264,265)
// Pythagorean Triple #322 is (95,168,193)
// Pythagorean Triple #323 is (190,336,386)
// Pythagorean Triple #324 is (119,120,169)
// Pythagorean Triple #325 is (238,240,338)
// Pythagorean Triple #326 is (24,143,145)
// Pythagorean Triple #327 is (48,286,290)
// Pythagorean Triple #328 is (72,429,435)
// Pythagorean Triple #329 is (25,312,313)
// Pythagorean Triple #330 is (69,260,269)
// Pythagorean Triple #331 is (105,208,233)
// Pythagorean Triple #332 is (210,416,466)
// Pythagorean Triple #333 is (133,156,205)
// Pythagorean Triple #334 is (266,312,410)
// Pythagorean Triple #335 is (104,153,185)
// Pythagorean Triple #336 is (208,306,370)
// Pythagorean Triple #337 is (52,165,173)
// Pythagorean Triple #338 is (104,330,346)
// Pythagorean Triple #339 is (27,364,365)
// Pythagorean Triple #340 is (75,308,317)
// Pythagorean Triple #341 is (115,252,277)
// Pythagorean Triple #342 is (140,171,221)
// Pythagorean Triple #343 is (280,342,442)
// Pythagorean Triple #344 is (84,187,205)
// Pythagorean Triple #345 is (168,374,410)
// Pythagorean Triple #346 is (28,195,197)
// Pythagorean Triple #347 is (56,390,394)
// Pythagorean Triple #348 is (29,420,421)
// Pythagorean Triple #349 is (161,240,289)
// Pythagorean Triple #350 is (120,209,241)
// Pythagorean Triple #351 is (240,418,482)
// Pythagorean Triple #352 is (60,221,229)
// Pythagorean Triple #353 is (120,442,458)
// Pythagorean Triple #354 is (31,480,481)
// Pythagorean Triple #355 is (87,416,425)
// Pythagorean Triple #356 is (135,352,377)
// Pythagorean Triple #357 is (175,288,337)
// Pythagorean Triple #358 is (207,224,305)
// Pythagorean Triple #359 is (160,231,281)
// Pythagorean Triple #360 is (96,247,265)
// Pythagorean Triple #361 is (32,255,257)
// Pythagorean Triple #362 is (93,476,485)
// Pythagorean Triple #363 is (145,408,433)
// Pythagorean Triple #364 is (189,340,389)
// Pythagorean Triple #365 is (225,272,353)
// Pythagorean Triple #366 is (204,253,325)
// Pythagorean Triple #367 is (136,273,305)
// Pythagorean Triple #368 is (68,285,293)
// Pythagorean Triple #369 is (155,468,493)
// Pythagorean Triple #370 is (203,396,445)
// Pythagorean Triple #371 is (252,275,373)
// Pythagorean Triple #372 is (180,299,349)
// Pythagorean Triple #373 is (36,323,325)
// Pythagorean Triple #374 is (261,380,461)
// Pythagorean Triple #375 is (297,304,425)
// Pythagorean Triple #376 is (228,325,397)
// Pythagorean Triple #377 is (152,345,377)
// Pythagorean Triple #378 is (76,357,365)
// Pythagorean Triple #379 is (319,360,481)
// Pythagorean Triple #380 is (280,351,449)
// Pythagorean Triple #381 is (120,391,409)
// Pythagorean Triple #382 is (40,399,401)
// Pythagorean Triple #383 is (168,425,457)
// Pythagorean Triple #384 is (84,437,445)
// Pythagorean Triple #385 is (132,475,493)
// Pythagorean Triple #386 is (44,483,485)
// Total number of Pythagorean triples found is 386
